# ============================================
# Gateway API - Environment Variables
# ============================================
# This file documents all environment variables needed by the Gateway API.
# Copy this file to .env and adjust values for your environment.

# ============================================
# ASP.NET Core Configuration
# ============================================

# Environment: Development, Staging, Production
ASPNETCORE_ENVIRONMENT=Development

# URLs the application listens on
ASPNETCORE_URLS=http://+:8080

# ============================================
# Keycloak Configuration (Requirements 10.1)
# ============================================

# Keycloak realm authority URL
# Format: http://{keycloak-host}:{port}/realms/{realm-name}
# Development: Use localhost:8180 when running Keycloak locally
# Production: Use internal Docker network name 'keycloak:8080'
Keycloak__Authority=http://localhost:8180/realms/Kairo

# Audience for JWT token validation (client ID for backend)
Keycloak__Audience=kairo-api

# OpenID Connect metadata endpoint
# Used to fetch public keys for JWT signature validation
Keycloak__MetadataAddress=http://localhost:8180/realms/Kairo/.well-known/openid-configuration

# ============================================
# CORS Configuration (Requirements 10.3)
# ============================================

# Allowed origins for CORS requests
# Add all frontend URLs that need to access the Gateway
# Array format: Cors__AllowedOrigins__0, Cors__AllowedOrigins__1, etc.
Cors__AllowedOrigins__0=http://localhost:5173
Cors__AllowedOrigins__1=http://localhost:3000

# Additional origins can be added as needed:
# Cors__AllowedOrigins__2=http://localhost:4200
# Cors__AllowedOrigins__3=https://your-production-domain.com

# ============================================
# Microservices URLs (Requirements 10.2)
# ============================================

# Eventos Microservice
# Development: Use localhost:5001 when running locally
# Production: Use internal Docker network name 'eventos-api:8080'
ReverseProxy__Clusters__eventos-cluster__Destinations__destination1__Address=http://localhost:5001

# Asientos Microservice
# Development: Use localhost:5002 when running locally
# Production: Use internal Docker network name 'asientos-api:8080'
ReverseProxy__Clusters__asientos-cluster__Destinations__destination1__Address=http://localhost:5002

# Usuarios Microservice
# Development: Use localhost:5003 when running locally
# Production: Use internal Docker network name 'usuarios-api:8080'
ReverseProxy__Clusters__usuarios-cluster__Destinations__destination1__Address=http://localhost:5003

# Entradas Microservice
# Development: Use localhost:5004 when running locally
# Production: Use internal Docker network name 'entradas-api:8080'
ReverseProxy__Clusters__entradas-cluster__Destinations__destination1__Address=http://localhost:5004

# Reportes Microservice
# Development: Use localhost:5005 when running locally
# Production: Use internal Docker network name 'reportes-api:8080'
ReverseProxy__Clusters__reportes-cluster__Destinations__destination1__Address=http://localhost:5005

# ============================================
# Logging Configuration (Optional)
# ============================================

# Log level: Trace, Debug, Information, Warning, Error, Critical
Logging__LogLevel__Default=Information
Logging__LogLevel__Microsoft.AspNetCore=Warning
Logging__LogLevel__Yarp=Information

# ============================================
# Health Check Configuration (Optional)
# ============================================

# Health check timeout in seconds
HealthChecks__Timeout=5

# ============================================
# Docker Compose Production Values
# ============================================
# When running with docker-compose, use these values instead:
#
# Keycloak__Authority=http://keycloak:8080/realms/Kairo
# Keycloak__MetadataAddress=http://keycloak:8080/realms/Kairo/.well-known/openid-configuration
#
# ReverseProxy__Clusters__eventos-cluster__Destinations__destination1__Address=http://eventos-api:8080
# ReverseProxy__Clusters__asientos-cluster__Destinations__destination1__Address=http://asientos-api:8080
# ReverseProxy__Clusters__usuarios-cluster__Destinations__destination1__Address=http://usuarios-api:8080
# ReverseProxy__Clusters__entradas-cluster__Destinations__destination1__Address=http://entradas-api:8080
# ReverseProxy__Clusters__reportes-cluster__Destinations__destination1__Address=http://reportes-api:8080

# ============================================
# Notes
# ============================================
# 1. Environment variables override values in appsettings.json
# 2. Use double underscore (__) to represent nested configuration sections
# 3. Array indices are specified with __0, __1, __2, etc.
# 4. For local development, ensure Keycloak is running on port 8180
# 5. For Docker deployment, use internal container names instead of localhost
# 6. Never commit actual .env files with sensitive data to version control
